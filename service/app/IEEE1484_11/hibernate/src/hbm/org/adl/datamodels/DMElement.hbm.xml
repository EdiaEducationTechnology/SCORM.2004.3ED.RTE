<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD//EN"
	"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping default-cascade="all" default-access="field" package="org.adl.datamodels" default-lazy="false">
	
	<class name="org.adl.datamodels.DMDelimiterDescriptor" table="SCORM_DELIMIT_DESC_T">
	
		<id column="DELIM_DESC_ID" type="long">
            <generator class="native">
                <param name="sequence">SCORM_DELIM_DESC_S</param>
            </generator>
        </id>
        
        <property name="mName" column="DESC_NAME" />
	
		<property name="mDefault" column="DEFAULT_VALUE" />
		
		<property name="mValueSPM" column="VALUE_SPM" />
		
		<many-to-one name="mValidator" column="VALIDATOR" unique-key="ID" index="SCORM_DELIM_DESC_VAL_IDX" class="org.adl.datamodels.DMTypeValidator" />
		
	</class>
	
	<class name="org.adl.datamodels.DMDelimiter" table="SCORM_DELIMITER_T">
	
		<id column="DELIM_ID" type="long">
            <generator class="native">
                <param name="sequence">SCORM_DELIM_S</param>
            </generator>
        </id>
        
        <many-to-one name="mDescription" column="DESCRIPTION" unique-key="ID" index="SCORM_DELIM_DESC_IDX" class="org.adl.datamodels.DMDelimiterDescriptor" />	
        
		<property name="mValue" column="VALUE" type="string" />
	
	</class>
	
	<class name="org.adl.datamodels.DMTypeValidator" table="SCORM_TYPE_VALIDATOR_T">
		
		<id column="ID" type="long">
            <generator class="native">
                <param name="sequence">SCORM_TYPE_VAL_S</param>
            </generator>
        </id>
		
		<discriminator column="VALIDATOR_TYPE" type="string"/>
		
		<property name="mType" column="TYPE" />
	
		<subclass name="org.adl.datamodels.datatypes.DateTimeValidator" 
			discriminator-value="DATE_TIME">
			<property name="mIncludeSubSecs" column="INCLUDE_SUB_SECS"/>
		</subclass>
		
		<subclass name="org.adl.datamodels.datatypes.DurationValidator" 
			discriminator-value="DURATION">
		</subclass>
				
		<subclass name="org.adl.datamodels.datatypes.InteractionValidator" 
			discriminator-value="INTERACTION">
			<property name="mAllowEmpty" column="INTER_ALLOW_EMPTY"/>
			<property name="mElement" column="ELEMENT"/>
			<property name="mInteractionType" column="INTERACTION_TYPE"/>
		</subclass>
		
		<subclass name="org.adl.datamodels.datatypes.IntRangeValidator" 
			discriminator-value="INT_RANGE">
			<property name="mMax" column="INT_MAX"/>
			<property name="mMin" column="INT_MIN"/>
		</subclass>
		
		<subclass name="org.adl.datamodels.datatypes.LangStringValidator" 
			discriminator-value="LANG_STRING">
			<property name="mAllowEmpty" column="LANG_ALLOW_EMPTY"/>
			<property name="mIANALangauges" column="IANA_LANGUAGES" type="text"/>
			<property name="mISOCountries" column="ISO_COUNTRIES" type="text"/>
			<property name="mISOExLanguages" column="ISO_EX_LANGUAGES" type="text"/>
			<property name="mISOLanguages" column="ISO_LANGUAGES" type="text"/>
		</subclass>
		
		<subclass name="org.adl.datamodels.datatypes.RealRangeValidator" 
			discriminator-value="REAL_RANGE">
			<property name="mMax" column="REAL_MAX"/>
			<property name="mMin" column="REAL_MIN"/>
		</subclass>
		
		<subclass name="org.adl.datamodels.datatypes.ResultValidator" 
			discriminator-value="RESULT">
			<property name="mVocabList" column="RESULT_VOCAB_LIST"/>
		</subclass>
		
		<subclass name="org.adl.datamodels.datatypes.SPMRangeValidator" 
			discriminator-value="SPM_RANGE">
			<property name="mSPM" column="SPM"/>
		</subclass>
		
		<subclass name="org.adl.datamodels.datatypes.URIValidator" 
			discriminator-value="URI">
			<property name="mSPM" column="URI_SPM"/>
		</subclass>
		
		<subclass name="org.adl.datamodels.datatypes.VocabularyValidator" 
			discriminator-value="VOCABULARY">
			<property name="mVocabList" column="VOCAB_LIST"/>
		</subclass>
		
	</class>
	
	
	<class name="org.adl.datamodels.DMElementDescriptor" table="SCORM_ELEMENT_DESC_T">
	
		<id column="ELEM_DESC_ID" type="long">
            <generator class="native">
                <param name="sequence">SCORM_ELEM_DESC_S</param>
            </generator>
        </id>
	
		<property name="mBinding" column="ED_BINDING" type="string" />
	
		<list name="mChildren" table="SCORM_LIST_ELEM_DESC_T">
			<key column="ELEM_DESC_ID" />
			<list-index column="SORT_ORDER"/>
			<many-to-many column="CHILD_ID" class="org.adl.datamodels.DMElementDescriptor"/>
		</list>
	
		<property name="mIsReadable" column="IS_READABLE" />
	
		<property name="mIsWriteable" column="IS_WRITABLE" />
	
		<list name="mDelimiters" table="SCORM_LIST_DELIM_DESC_T">
			<key column="ELEM_DESC_ID" />
			<list-index column="SORT_ORDER"/>
			<many-to-many column="DELIM_DESC_ID" class="org.adl.datamodels.DMDelimiterDescriptor"/>
		</list>
	
		<property name="mInitial" column="INITIAL_VALUE" />
		
		<!-- Can't determine what type of object this list contains -->
		<!--list name="mDependentOn" table="SCORM_LIST_ELEM_DESC_T">
			<key column="DEPENDENT_ON" />
			<list-index column="SORT_ORDER"/>
			<one-to-many class="org.adl.datamodels.DMElementDescriptor"/>
		</list-->
	
		<property name="mIsUnique" column="IS_UNIQUE" />
		
		<property name="mWriteOnce" column="IS_WRITE_ONCE" />
	
		<property name="mValueSPM" column="VALUE_SPM" />
		
		<property name="mSPM" column="SPM" />
	
		<property name="mOldSPM" column="OLD_SPM" />
	
		<property name="mMaximum" column="IS_MAXIMUM" />
	
		<property name="mShowChildren" column="IS_SHOW_CHILDREN" />
	
		<many-to-one name="mValidator" column="VALIDATOR" unique-key="ID" index="SCORM_ELEM_DESC_VAL_IDX" class="org.adl.datamodels.DMTypeValidator" />
		
	</class>
	
	<class name="org.adl.datamodels.DMElement" table="SCORM_ELEMENT_T" discriminator-value="0">
	
		<id column="ELEMENT_ID" type="long">
            <generator class="native">
                <param name="sequence">SCORM_ELEMENT_S</param>
            </generator>
        </id>

		<many-to-one name="mDescription" column="DESCRIPTION" unique-key="ID" index="SCORM_ELEMENT_DESC_IDX" class="org.adl.datamodels.DMElementDescriptor" />	
		
		<many-to-one name="mParent" column="PARENT" unique-key="ID" index="SCORM_ELEMENT_PARENT_IDX" class="org.adl.datamodels.DMElement" />
		
		<list name="mChildrenBindings" table="SCORM_LIST_BINDINGS_T">
			<key column="ELEMENT_ID" />
			<list-index column="SORT_ORDER"/>
			<element column="BINDING" type="string"/>
		</list>
			
		<!--map name="mChildren" 
        	table="SCORM_DM_EL_CHILDREN_T">
    		<key column="CHILDREN"/>
    		<map-key column="CHILD_NAME" type="string"/>
    		<one-to-many class="org.adl.datamodels.DMElement"/>
		</map-->
		
		<map name="mChildren" table="SCORM_MAP_CHILDREN_T">
    		<key column="ELEMENT_ID"/>
    		<map-key column="CHILD_BINDING" type="string"/>
    		<many-to-many column="CHILD_ID" class="org.adl.datamodels.DMElement"/>
		</map>
	
		<list name="mRecords" table="SCORM_LIST_RECORDS_T">
			<key column="ELEMENT_ID" />
			<list-index column="SORT_ORDER"/>
			<many-to-many column="RECORD_ID" class="org.adl.datamodels.DMElement"/>
		</list>
	
		<property name="mValue" column="VALUE" />
	
		<list name="mDelimiters" table="SCORM_LIST_DELIMITERS_T">
			<key column="ELEMENT_ID" />
			<list-index column="SORT_ORDER"/>
			<many-to-many column="DELIM_ID" class="org.adl.datamodels.DMDelimiter"/>
		</list>
		
		<property name="mInitialized" column="IS_INITIALIZED" />
		
		<property name="mTruncSPM" column="TRUNC_SPM" />

		<joined-subclass name="org.adl.datamodels.ieee.SCORM_2004_DMElement" table="SCORM_2004_ELEMENT_T">
			<key column="ELEMENT_ID"/>
		</joined-subclass>
		
		<joined-subclass name="org.adl.datamodels.ieee.Version" table="SCORM_VERSION_T">
			<key column="ELEMENT_ID"/>
		</joined-subclass>

	</class>
	
	<class name="org.adl.datamodels.ieee.SCORM_2004_DM" table="SCORM_2004_DATAMODEL_T" discriminator-value="0">
	
		<id column="DATAMODEL_ID" type="long">
            <generator class="native">
                <param name="sequence">SCORM_DM_S</param>
            </generator>
        </id>
	
		<property name="mBinding" column="BINDING" />

		<map name="mElements" table="SCORM_MAP_ELEMENTS_T">
    		<key column="DATAMODEL_ID"/>
    		<map-key column="ELEMENT_BINDING" type="string"/>
    		<many-to-many column="ELEMENT_ID" class="org.adl.datamodels.DMElement"/>
		</map>
	
	</class>
	
	
</hibernate-mapping>